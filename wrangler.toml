# ============================================
# Y-Nav Cloudflare Workers 部署配置
# ============================================
# 此配置用于将 Y-Nav 部署为 Cloudflare Worker
# 支持自定义域名 + 优选 IP 实现国内加速
# ============================================

name = "y-nav"
main = "worker/index.ts"
compatibility_date = "2024-01-01"

# 静态资源目录 (Workers Sites)
[site]
bucket = "./dist"

# KV 命名空间绑定
# 首次部署前需要运行: wrangler kv:namespace create YNAV_KV
# 然后将返回的 id 填入下方
[[kv_namespaces]]
binding = "YNAV_KV"
id = ""  # 替换为你的 KV Namespace ID
# preview_id = ""  # 本地预览时使用的 KV ID (可选)

# 环境变量 (也可以在 Cloudflare Dashboard 中设置)
[vars]
# SYNC_PASSWORD = ""  # 同步密码，建议在 Dashboard 中设置而非此处

# 生产环境配置 (可选)
# [env.production]
# routes = [
#   { pattern = "your-domain.com/*", zone_name = "your-domain.com" }
# ]

# ============================================
# 部署步骤:
# 1. npm run build
# 2. wrangler kv:namespace create YNAV_KV
# 3. 将返回的 id 填入上方 kv_namespaces.id
# 4. wrangler deploy
# ============================================
